<div class="row">
    <div class="col-6">
        <div class="justify-content-start">
            {% if widget.is_initial %}
                <img src="{{ widget.value.url }}" alt="{{ widget.value }}" id="id_image_{{ widget.name }}"
                          style="height: 40px;width: 100%;object-fit: cover;">
            {% else %}
                <img src="https://place-hold.it/120x40" alt=""
                          style="max-width: 120px;height: auto;">
            {% endif %}
        </div>
    </div>
    <div class="col-6">
        <div class="input-group mb-3">
            <div class="custom-file">
                <input type=file class="custom-file-input" name="{{ widget.name }}"
                    onchange=file_changed() id="id_{{ widget.name }}">
                <label class="btn btn-info px-4" for="id_{{ widget.name }}">Загрузить</label>
            </div>
        </div>
    </div>
</div>
<script>
    function file_changed() {
        var selectedFile = document.getElementById('id_{{ widget.name }}').files[0];

        var img = document.getElementById('id_image_{{ widget.name }}')

        var reader = new FileReader();
        reader.onload = function () {
            img.src = this.result
        }
        reader.readAsDataURL(selectedFile);
    }
</script>